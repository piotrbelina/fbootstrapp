// tablesorter pager plugin updated 2/22/2012 by christianz
(function(a){a.extend({tablesorterPager:new function(){var b=function(b){var c="addClass",d="removeClass",e=b.cssDisabled;if(b.updateArrows){b.container[b.totalRows<b.size?c:d](e);a(b.cssFirst+","+b.cssPrev,b.container)[b.page===0?c:d](e);a(b.cssNext+","+b.cssLast,b.container)[b.page===b.totalPages-1?c:d](e)}},c=function(c,d){d.startRow=d.size*d.page+1;d.endRow=Math.min(d.totalRows,d.size*(d.page+1));var e=a(d.cssPageDisplay,d.container);b(d);d.container.show();a(c).trigger("pagerComplete",d)},d=function(b,c){var d=a(b);if(!c.pagerPositionSet&&c.positionFixed){if(d.offset){c.container.css({top:d.offset().top+d.height()+c.offset+"px",position:"absolute"})}c.pagerPositionSet=true}},e=function(b,c){var d,e=a("tr:not(."+c.cssChildRow+")",b.tBodies[0]),f=e.length,g=c.page*c.size,h=g+c.size;if(h>f){h=f}for(d=0;d<f;d++){e[d].style.display=d>=g&&d<h?"":"none"}},f=function(c,d){b(d);if(!d.removeRows){e(c,d);a(c).bind("sortEnd.pager",function(){e(c,d);a(c).trigger("applyWidgets")})}},g=function(b,f,g){var h,i,j,k=a(b.tBodies[0]),m=f.length,n=g.page*g.size,o=n+g.size;if(m<1){return}a(b).trigger("pagerChange",g);if(!g.removeRows){e(b,g)}else{if(o>f.length){o=f.length}a.tablesorter.clearTableBody(b);for(h=n;h<o;h++){j=f[h];m=j.length;for(i=0;i<m;i++){k[0].appendChild(j[i])}}}d(b,k,g);a(b).trigger("applyWidgets");if(g.page>=g.totalPages){l(b,g)}c(b,g)},h=function(a,b){b.lastPage=b.page;b.lastSize=b.size;b.size=b.totalRows;b.totalPages=1;g(a,b.rowsCopy,b)},i=function(b,c){if(c.isDisabled){return}if(c.page<0||c.page>c.totalPages-1){c.page=0}a(".pagerBtn").removeClass("active");a(".pagerBtn[rel="+c.page+"]").addClass("active");g(b,c.rowsCopy,c)},j=function(a,b,c){c.size=c.lastSize=b;c.totalPages=Math.ceil(c.totalRows/c.size);c.pagerPositionSet=false;i(a,c);d(a,c)},k=function(a,b){b.page=0;i(a,b)},l=function(a,b){b.page=b.totalPages-1;i(a,b)},m=function(a,b){b.page++;if(b.page>=b.totalPages-1){b.page=b.totalPages-1}if(b.page%b.pagesToDisplay==0){n(a,b)}i(a,b)},n=function(a,b){b.currentPageSet++;p(a,b)},o=function(a,b){b.currentPageSet--;p(a,b)},p=function(b,c){if(c.currentPageSet==0){var d=b.rows.length;if(c.size>=d){return}var e=d/c.size;if(c.pagesToDisplay>e){c.pagesToDisplay=e}}var f=a("<ul />");f.addClass("pagerContainer");c.container.html("");var g=a("<li />").addClass("prev disabled");g.html("<a href='javascript:void(0);'>"+c.prevText+"</a>");g.bind("click.pager",function(){moveToPrevPage(b,c)});f.append(g);var h=c.currentPageSet*c.pagesToDisplay;var j=h+c.pagesToDisplay;if(c.currentPageSet>0&&j>c.totalPages){j=c.totalPages}for(var k=h;k<j;k++){var l=a("<li />");l.addClass("pagerBtn numBtn");l.attr("rel",k);if(k==0)l.addClass("active");l.html("<a href='javascript:void(0);'>"+(k+1)+"</a>");l.bind("click.pager",function(){c.page=parseInt(a(this).attr("rel"));i(b,c)});f.append(l)}var n=a("<li />").addClass("next");n.html("<a href='javascript:void(0);'>"+c.nextText+"</a>");n.bind("click.pager",function(){m(b,c)});f.append(n);c.container.append(f)};moveToPrevPage=function(a,b){b.page--;if(b.page<=0){b.page=0}if((b.page+1)%b.pagesToDisplay==0){o(a,b)}i(a,b)},destroyPager=function(b,c){h(b,c);c.container.hide();c.appender=null;a(b).unbind("destroy.pager sortEnd.pager enable.pager disable.pager")},enablePager=function(b,c){c.isDisabled=false;a("table").trigger("update");c.page=c.lastPage||0;c.totalPages=Math.ceil(c.totalRows/c.size);f(b,c)};this.appender=function(a,b){var c=a.config;c.rowsCopy=b;c.totalRows=b.length;c.size=c.lastSize||c.size;c.totalPages=Math.ceil(c.totalRows/c.size);g(a,b,c)};this.defaults={container:null,output:"{startRow} to {endRow} of {totalRows} rows",updateArrows:true,page:0,size:10,positionFixed:true,offset:0,pagesToDisplay:5,removeRows:true,cssNext:".next",cssPrev:".prev",prevText:"? Previous",nextText:"Next ?",cssDisabled:"disabled",totalRows:0,totalPages:0,currentPageSet:0,appender:this.appender};this.construct=function(b){return this.each(function(){var c=a.extend(this.config,a.tablesorterPager.defaults,b),d=this,e=c.container;f(d,c);p(d,c);a(this).trigger("appendCache");a(this).unbind("disable.pager enable.pager destroy.pager").bind("disable.pager",function(){c.isDisabled=true;h(d,c)}).bind("enable.pager",function(){enablePager(d,c)}).bind("destroy.pager",function(){destroyPager(d,c)});i(d,c)})}}});a.fn.extend({tablesorterPager:a.tablesorterPager.construct})})(jQuery)